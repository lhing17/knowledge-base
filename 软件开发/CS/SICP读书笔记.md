# SICP（计算机程序的构造和解释）读书笔记

## 第一章：构造过程抽象

### 1. 编程语言的基本要素
核心思想：任何一门强大的编程语言都应该包含三种基本机制：基础表达式、组合方式和抽象方式。这三种机制构成了语言的基础框架。

#### 1.1 三种基本机制
1. 基本表达式（Primitive Expressions）
   - 语言中最简单的实体
   - 例如：数字、基本运算符、内置函数等
   - 直接表示最基本的数据和操作

2. 组合方式（Means of Combination）
   - 将简单元素组合成复合元素
   - 例如：函数调用、运算符组合、复合数据结构
   - 通过组合创造更复杂的表达式

3. 抽象方式（Means of Abstraction）
   - 将复合对象命名并作为单元操作
   - 例如：函数定义、变量命名、模块化
   - 隐藏实现细节，提供使用接口

#### 1.2 领域特定语言（DSL）
- 基于基本语言构建特定领域的语言
- 作为需求和基础语言之间的中间层
- 提供更贴近问题域的表达方式

### 2. 程序求值

#### 2.1 组合式求值规则
1. 求值过程：
   - 对所有子表达式求值
   - 将运算符（最左表达式）应用于运算对象（其他表达式的值）
   - 递归应用这个过程

2. 特殊形式：
   - 有自己的求值规则
   - 例如：定义、条件、循环等

#### 2.2 替换模型（Substitution Model）
- 用于理解程序执行过程
- 过程应用的基本机制：
  1. 将实际参数代入形式参数
  2. 对替换后的过程体求值
- 替换模型的局限性
  - 仅适用于理解简单的过程应用
  - 不能完全反映实际的计算机执行过程

#### 2.3 应用序和正则序
1. 应用序求值（Applicative Order）
   - 先求值参数，再应用过程
   - Scheme/Lisp的标准求值模型
   - 优点：避免重复计算
   - 缺点：可能计算不需要的值

2. 正则序求值（Normal Order）
   - 完全展开后再归约
   - 延迟求值直到实际需要
   - 优点：可能避免不必要的计算
   - 缺点：可能导致重复计算

### 3. 计算过程的形状

#### 3.1 递归过程（Recursive Process）
- 特点：
  - 执行过程中不断膨胀和收缩
  - 构造延迟操作链
  - 需要跟踪的信息量与输入规模相关
- 线性递归过程示例：
```scheme
(define (factorial n)
  (if (= n 1)
      1
      (* n (factorial (- n 1)))))
```
#### 3.2 迭代过程（Iterative Process）
- 特点：
  - 状态可以用固定数量的变量描述
  - 包含状态变量、更新规则和终止检测
  - 空间复杂度为常数
- 线性迭代过程示例：
```scheme
(define (factorial n)
  (define (iter product counter)
    (if (> counter n)
        product
        (iter (* counter product)
              (+ counter 1))))
  (iter 1 1))
```

#### 3.3 树形递归（Tree Recursion）
- 特点：
  - 分支过程呈树状展开
  - 计算过程可能存在大量重复
- 经典示例：斐波那契数列计算
- 优化方法：
  - 记忆化（memoization）
  - 转换为迭代过程
### 4. 高阶过程（Higher-Order Procedures） 
#### 4.1 过程作为参数
- 抽象共同的计算模式
- 提高代码复用性
- 例如：map、filter、reduce 
#### 4.2 过程作为返回值
- 创建特定的过程
- 实现闭包
- 支持柯里化（Currying）
### 5. 数据抽象（Data Abstraction） 
#### 5.1 抽象屏障（Abstraction Barriers）
- 分离使用和实现
- 建立模块化界面
- 支持系统的演化和维护 
#### 5.2 数据的层次结构
- 复合数据的构造
- 闭包性质的重要性
- 抽象数据类型的实现

### 6. 系统设计的模块化原则
#### 6.1 分层设计（Stratified Design）
- 系统分层：
  - 每层使用下层提供的语言
  - 每层都有自己的基础元素
  - 每层都有特定的组合方式
- 优势：
  - 降低复杂度
  - 提高可维护性
  - 支持系统演化 
#### 6.2 通用接口
- 标准化数据结构
- 操作的一致性
- 支持模块的组合
### 实践要点
1. 注重过程抽象和数据抽象
2. 选择合适的递归或迭代方式
3. 使用高阶过程提高抽象层次
4. 建立清晰的抽象屏障
5. 采用分层设计方法构建系统
### 延伸阅读
- 《计算机程序的构造和解释》原书
- Scheme/Lisp编程语言文档
- 函数式编程相关资料
